<!--
SPDX-FileCopyrightText: OpenTalk GmbH <mail@opentalk.eu>

SPDX-License-Identifier: EUPL-1.2
-->

# CI

## Generate Docs

### Prerequisites

Make sure `sqlant` is installed

```sh
cargo install sqlant
```

The postgres database needs to be running. The easiest way to achieve this by cloning the [test environment](https://git.opentalk.dev/opentalk/backend/tools/testing-environment) and starting it with

```sh
docker compose up -d
```

### Generating

The documentation can be generated by running the [`ci/docs-update-generated-parts.sh`](docs-update-generated-parts.sh) script from the root directory. The script expects a release build, so either make sure you have an up-to-date release build present with `cargo build --release` or override the target by setting `OPENTALK_CONTROLLER_TARGET`. Additionally you need to set the database url with `OPENTALK_CTRL_DATABASE__URL`. E.g. to generate the docs from a debug build:

```sh
OPENTALK_CTRL_DATABASE__URL=postgres://postgres:password123@localhost:5432/opentalk OPENTALK_CONTROLLER_TARGET=target/debug/opentalk-controller ./docs-update-generated-parts.sh
```
